pipeline {
    agent any

    stages {
        stage('Create File') {
            steps {
                script {
                    sh 'echo Hello Jenkins > /tmp/demo_file.txt'
                    echo "File created successfully!"
                }
            }
        }

        stage('Modify File (Simulated Failure)') {
            steps {
                script {
                    try {
                        sh 'some_invalid_command' // This will fail
                        echo "File modified successfully!"
                    } catch (Exception e) {
                        echo "Error in modifying file: ${e.getMessage()}"
                    }
                }
            }
        }

        stage('Delete File') {
            steps {
                script {
                    sh 'rm /tmp/demo_file.txt'
                    echo "File deleted successfully!"
                }
            }
        }
    }

    post {
        always {
            echo "Pipeline execution completed!"
            echo "Performing cleanup tasks..."
            sh 'rm -f /tmp/demo_file.txt'
        }
        success {
            echo " All stages executed successfully!"
        }
        failure {
            echo " Pipeline failed due to an error!"
        }
    }
}
